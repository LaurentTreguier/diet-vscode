{
    "scopeName": "source.diet",
    "fileTypes": [
        "dt"
    ],
    "patterns": [
        {
            "name": "comment.line.doube-slash",
            "match": "//.*"
        },
        {
            "match": "^\\s*-\\s*(.+)",
            "captures": {
                "1": {
                    "patterns": [
                        {
                            "include": "#dlang"
                        }
                    ]
                }
            }
        },
        {
            "name": "meta.tag.doctype.diet",
            "match": "^doctype\\s+\\S+"
        },
        {
            "match": "^\\s*(include|extends)\\s*(\\S*)",
            "captures": {
                "1": {
                    "name": "storage.type.import.diet"
                },
                "2": {
                    "name": "variable.other.import.diet"
                }
            }
        },
        {
            "begin": "(\\s*):(css)",
            "end": "^(?!\\1\\s)(?=[\\t ]*\\S)",
            "beginCaptures": {
                "2": {
                    "name": "entity.name.tag.filter.css.diet"
                }
            },
            "patterns": [
                {
                    "include": "#css"
                }
            ]
        },
        {
            "begin": "(\\s*):(javascript)",
            "end": "^(?!\\1\\s)(?=[\\t ]*\\S)",
            "beginCaptures": {
                "2": {
                    "name": "entity.name.tag.filter.javascript.diet"
                }
            },
            "patterns": [
                {
                    "include": "#javascript"
                }
            ]
        },
        {
            "begin": "(\\s*):(markdown)",
            "end": "^(?!\\1\\s)(?=[\\t ]*\\S)",
            "beginCaptures": {
                "2": {
                    "name": "entity.name.tag.filter.markdown.diet"
                }
            },
            "patterns": [
                {
                    "include": "#markdown"
                }
            ]
        },
        {
            "begin": "(\\s*):(htmlescape)",
            "end": "^(?!\\1\\s)(?=[\\t ]*\\S)",
            "beginCaptures": {
                "2": {
                    "name": "entity.name.tag.filter.htmlescape.diet"
                }
            },
            "patterns": [
                {
                    "include": "#text"
                }
            ]
        },
        {
            "patterns": [
                {
                    "include": "#tag"
                }
            ]
        }
    ],
    "repository": {
        "dlang": {
            "patterns": [
                {
                    "include": "source.d"
                }
            ]
        },
        "css": {
            "patterns": [
                {
                    "include": "source.css"
                }
            ]
        },
        "javascript": {
            "patterns": [
                {
                    "include": "source.js"
                }
            ]
        },
        "markdown": {
            "patterns": [
                {
                    "include": "text.html.markdown"
                }
            ]
        },
        "text": {
            "patterns": [
                {
                    "include": "text.plain"
                }
            ]
        },
        "tag": {
            "match": "(?<=^)\\s*((?:\\w[\\w\\-]*)|\\|)?([\\w\\-#.]*\\w)?(\\((?:[\\w\\-]+(?:\\s*=\\s*(\"|').*?(?<!\\\\)\\4)?,?\\s*)+\\))?([\\w\\-#.]*\\w)?([<>]{0,2})(?:(!?=)\\s*(.+))?(.*)",
            "captures": {
                "1": {
                    "name": "entity.name.tag.diet"
                },
                "2": {
                    "patterns": [
                        {
                            "include": "#special-attribute"
                        }
                    ]
                },
                "3": {
                    "patterns": [
                        {
                            "include": "#normal-attribute"
                        }
                    ]
                },
                "5": {
                    "patterns": [
                        {
                            "include": "#special-attribute"
                        }
                    ]
                },
                "6": {
                    "name": "entity.name.tag.diet"
                },
                "7": {
                    "name": "entity.name.tag.diet"
                },
                "8": {
                    "patterns": [
                        {
                            "include": "#dlang"
                        }
                    ]
                },
                "9": {
                    "patterns": [
                        {
                            "include": "#interpolated"
                        },
                        {
                            "include": "#html-characters"
                        }
                    ]
                }
            }
        },
        "normal-attribute": {
            "match": "(?:\\(|,)\\s*([\\w\\-]+)(?:\\s*=\\s*((\"|').*?(?<![^\\\\]\\\\)\\3))?",
            "captures": {
                "1": {
                    "name": "entity.other.attribute-name.diet"
                },
                "2": {
                    "patterns": [
                        {
                            "include": "#string"
                        }
                    ]
                }
            }
        },
        "special-attribute": {
            "patterns": [
                {
                    "match": "#([\\w\\-]+)\\b",
                    "captures": {
                        "1": {
                            "name": "entity.other.attribute-name.diet"
                        }
                    }
                },
                {
                    "match": "\\.([\\w\\-]+)\\b",
                    "captures": {
                        "1": {
                            "name": "constant.other.name.attribute.diet"
                        }
                    }
                }
            ]
        },
        "string": {
            "name": "string.quoted.double.diet",
            "begin": "(\"|')",
            "end": "\\1",
            "patterns": [
                {
                    "include": "#escaped-char"
                },
                {
                    "include": "#interpolated"
                }
            ]
        },
        "interpolated": {
            "begin": "(#)\\{",
            "end": "\\}",
            "beginCaptures": {
                "1": {
                    "name": "keyword.operator.interpolator.diet"
                }
            },
            "patterns": [
                {
                    "include": "#dlang"
                }
            ]
        },
        "escaped-char": {
            "name": "constant.character.escape.diet",
            "match": "\\\\."
        },
        "html-characters": {
            "name": "constant.character.diet",
            "match": "&\\w+;"
        }
    }
}